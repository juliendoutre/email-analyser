(this["webpackJsonpemail-analyser"]=this["webpackJsonpemail-analyser"]||[]).push([[0],{199:function(e,t,n){e.exports=n(338)},204:function(e,t,n){},206:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(38),c=n.n(l),i=(n(204),n(205),n(206),n(346)),o=n(354),s=n(30),u=n(83),m=function(){return r.a.createElement(o.a,{as:"h1",icon:!0,textAlign:"center"},r.a.createElement(s.a,{name:"mail",circular:!0}),r.a.createElement(o.a.Content,null,"Email Analyser",r.a.createElement(u.a,{color:"blue"},"BETA")))},d=function(){return r.a.createElement("a",{href:"https://github.com/juliendoutre/email-analyser",className:"github-corner","aria-label":"View source on GitHub"},r.a.createElement("svg",{width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#151513",color:"#fff",position:"absolute",top:"0",border:"0",right:"0"},"aria-hidden":"true"},r.a.createElement("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),r.a.createElement("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),r.a.createElement("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})))},f=n(166),h=n(79),g=n(80),E=n(82),y=n(84),p=n(347),b=n(353),v=n(352),C=n(349),w=n(114),k=n(350),x=function(e,t){return function(){var n=document.createElement("a"),a=new Blob([e],{type:"application/json"});n.href=URL.createObjectURL(a),n.download=t,n.click()}},O=function(e){return r.a.createElement(w.a,{basic:!0},r.a.createElement(b.a,{icon:!0,labelPosition:"right",onClick:(t=e.results,n="email-analyzer-metadata-headers.csv",function(){var e="";Object.keys(t).forEach((function(n){e+=n+',"'+(Array.isArray(t[n])?t[n].join("\n"):t[n])+'"\n'}));var a=document.createElement("a"),r=new Blob([e],{type:"text/csv"});a.href=URL.createObjectURL(r),a.download=n,a.click()})},"Download CSV",r.a.createElement(s.a,{name:"download"})),r.a.createElement(k.a,{selectable:!0,basic:"very"},r.a.createElement(k.a.Body,null,Object.keys(e.results).map((function(t){return r.a.createElement(k.a.Row,{key:t},r.a.createElement(k.a.Cell,null,t),r.a.createElement(k.a.Cell,null,r.a.createElement(w.a,{basic:!0,style:{overflow:"auto",width:"45vw",whiteSpace:"nowrap"}}," ",Array.isArray(e.results[t])?e.results[t].join("\n"):e.results[t])))})))));var t,n},j=n(51),A=function(e,t){null!=e.name&&(e.name in t?Array.isArray(t[e.name])?t[e.name].push(e.contents):t[e.name]=[t[e.name],e.contents]:t[e.name]=e.contents)},S=function(e){var t,n={},a={name:null,contents:null},r=Object(j.a)(e.split("\n"));try{for(r.s();!(t=r.n()).done;){var l=t.value;if(""!==l){var c=l.match(/^[-\w]*:/);null!=c&&c.length>0?(A(a,n),a.name=c[0].replace(":",""),a.contents=l.replace(c[0],"").trim()):(""!==a.contents&&(a.contents+="\n"),a.contents+=l.trim())}}}catch(i){r.e(i)}finally{r.f()}return A(a,n),n},L=function(e){var t=JSON.stringify(e.results,null,2);return r.a.createElement(w.a,{basic:!0},r.a.createElement(b.a,{icon:!0,labelPosition:"right",onClick:x(t,"email-analyzer-metadata-headers.json")},"Download JSON",r.a.createElement(s.a,{name:"download"})),r.a.createElement("pre",{style:{overflowX:"auto"}},t))},I=n(23),T=function(e,t){return Array.isArray(t)&&t.indexOf(e.id)>-1?1===e.level?"blue":"green":1===e.level?"red":"gray"},H=function(e){Object(y.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={enabled:"Received"in a.props.results},a}return Object(g.a)(n,[{key:"componentDidMount",value:function(){if(this.state.enabled){var e=function(e){var t,n={nodes:[],links:[]},a=Object(j.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,l=r.match(/by [-.:\w]*/),c=r.match(/^from [-.:\w]*/);null!==l&&l.length>0&&function(){var e=l[0].replace("by ","").toLowerCase();if(n.nodes.reduce((function(t,n){return t||n.id===e}),!1)||n.nodes.push({id:e}),null!=c&&c.length>0){var t=c[0].replace("from ","").toLowerCase();n.links.push({source:t,target:e,strength:.5}),n.nodes.reduce((function(e,n){return e||n.id===t}),!1)||n.nodes.push({id:t})}}()}}catch(i){a.e(i)}finally{a.f()}return n}(this.props.results.Received),t=I.g("#canvas").attr("width",1050).attr("height",500),n=I.f().force("charge",I.e().strength(-100)).force("center",I.c(525,250)).force("link",I.d().id((function(e){return e.id})).strength((function(e){return e.strength}))),a=I.a().on("start",(function(e){e.fx=e.x,e.fy=e.y})).on("drag",(function(e){n.alphaTarget(.7).restart(),e.fx=I.b.x,e.fy=I.b.y})).on("end",(function(e){I.b.active||n.alphaTarget(0),e.fx=null,e.fy=null})),r=t.append("g").selectAll("circle").data(e.nodes).enter().append("circle").attr("r",10).attr("fill",T).call(a).on("click",(function(t){var n,a=(n=t,e.links.reduce((function(e,t){return t.target.id===n.id?e.push(t.source.id):t.source.id===n.id&&e.push(t.target.id),e}),[n.id]));r.attr("fill",(function(e){return T(e,a)})),l.attr("fill",(function(e){return function(e,t){return Array.isArray(t)&&t.indexOf(e.id)>-1?"green":"black"}(e,a)})),c.attr("stroke",(function(e){return function(e,t){return function(e,t){return t.target.id===e.id||t.source.id===e.id}(e,t)?"green":"#E5E5E5"}(t,e)}))})),l=t.append("g").selectAll("text").data(e.nodes).enter().append("text").text((function(e){return e.id})).attr("font-size",15).attr("dx",15).attr("dy",4),c=t.append("g").selectAll("line").data(e.links).enter().append("line").attr("stroke-width",1).attr("stroke","#E5E5E5");n.nodes(e.nodes).on("tick",(function(){r.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})),l.attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})),c.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y}))})),n.force("link").links(e.links)}}},{key:"render",value:function(){return this.state.enabled?r.a.createElement(w.a,{basic:!0},r.a.createElement("svg",{id:"canvas"})):r.a.createElement(w.a,{basic:!0,disabled:!0},r.a.createElement(o.a,{as:"h4"},"Nothing to display."))}}]),n}(a.Component),R=n(351),N=function(e,t,n){for(var a=0,r=Object.keys(t);a<r.length;a++){var l=r[a];l.toLowerCase()===e&&(n[e]=t[l])}},B=function(e){var t=function(e){var t={users:{},contents:{},routing:[]};if(["from","to","cc"].forEach((function(n){return N(n,e,t.users)})),["message-id","subject","thread-topic","mime-version","content-type","content-language"].forEach((function(n){return N(n,e,t.contents)})),"Received"in e){var n,a=Object(j.a)(e.Received);try{for(a.s();!(n=a.n()).done;){var r=n.value,l={},c=r.match(/by [-.:\w]*/);null!==c&&c.length>0&&(l.target=c[0].replace("by ","").toLowerCase());var i=r.match(/^from [-.:\w]*/);null!=i&&i.length>0&&(l.source=i[0].replace("from ","").toLowerCase()),t.routing.push(l)}}catch(o){a.e(o)}finally{a.f()}}return t}(e.results);return r.a.createElement(w.a,{basic:!0},r.a.createElement(b.a,{icon:!0,labelPosition:"right",onClick:x(JSON.stringify(t,null,2),"email-metadata-analyzer-summary.json")},"Download JSON",r.a.createElement(s.a,{name:"download"})),r.a.createElement(o.a,{as:"h3",disabled:0===Object.keys(t.users).length},r.a.createElement(s.a,{name:"users"}),r.a.createElement(o.a.Content,null,"Stakeholders")),r.a.createElement(R.a,{bulleted:!0,relaxed:!0,items:Object.keys(t.users).map((function(e){return e+": "+t.users[e]}))}),r.a.createElement(o.a,{as:"h3",disabled:0===Object.keys(t.contents).length},r.a.createElement(s.a,{name:"file alternate"}),r.a.createElement(o.a.Content,null,"Contents")),r.a.createElement(R.a,{bulleted:!0,relaxed:!0,items:Object.keys(t.contents).map((function(e){return e+": "+t.contents[e]}))}),r.a.createElement(o.a,{as:"h3",disabled:0===Object.keys(t.contents).length},r.a.createElement(s.a,{name:"globe"}),r.a.createElement(o.a.Content,null,"Routing")),t.routing.length>0?r.a.createElement(k.a,null,r.a.createElement(k.a.Header,null,r.a.createElement(k.a.HeaderCell,null,"Source"),r.a.createElement(k.a.HeaderCell,null,"Target")),r.a.createElement(k.a.Body,null,t.routing.map((function(e){return r.a.createElement(k.a.Row,{key:e},r.a.createElement(k.a.Cell,null,e.source),r.a.createElement(k.a.Cell,null,e.target))})))):null)},P=function(e){Object(y.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",results:{},messageHidden:!0,activeIndex:0},e.handleChange=function(t,n){var a=n.name,r=n.value;return e.setState(Object(f.a)({},a,r))},e.handleSubmit=function(){e.setState({results:{},messageHidden:!0,activeIndex:0});var t=S(e.state.email);e.setState({results:t}),e.setState({messageHidden:0!==Object.keys(t).length})},e.handleDismiss=function(){e.setState({messageHidden:!0})},e.handleClear=function(){e.setState({email:"",loading:!1,results:{},messageHidden:!0})},e.handleTabChange=function(t,n){var a=n.activeIndex;return e.setState({activeIndex:a})},e}return Object(g.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(p.a,{style:{textAlign:"center",marginTop:"3em"}},r.a.createElement(p.a.TextArea,{placeholder:"Email contents",name:"email",value:this.state.email,onChange:this.handleChange,rows:15}),r.a.createElement(b.a,{onClick:this.handleSubmit},"Analyze"),r.a.createElement(b.a,{onClick:this.handleClear,color:"orange"},"Clear")),r.a.createElement(v.a,{warning:!0,hidden:this.state.messageHidden,onDismiss:this.handleDismiss},r.a.createElement(v.a.Header,null,"Could not parse any header..."),r.a.createElement("p",null,"Please enter an other input to parse.")),r.a.createElement(C.a,{activeIndex:this.state.activeIndex,onTabChange:this.handleTabChange,panes:[{menuItem:"Summary",render:function(){return r.a.createElement(C.a.Pane,null,r.a.createElement(B,{results:e.state.results}))}},{menuItem:"Graph",render:function(){return r.a.createElement(C.a.Pane,null,r.a.createElement(H,{results:e.state.results}))}},{menuItem:"Table",render:function(){return r.a.createElement(C.a.Pane,null,r.a.createElement(O,{results:e.state.results}))}},{menuItem:"JSON",render:function(){return r.a.createElement(C.a.Pane,null,r.a.createElement(L,{results:e.state.results}))}}],hidden:0===Object.keys(this.state.results).length,style:{marginTop:"3em"},defaultActiveIndex:0}))}}]),n}(a.Component),D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(i.a,{style:{paddingTop:"3em"},textAlign:"left"},r.a.createElement(m,null),r.a.createElement(P,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[199,1,2]]]);
//# sourceMappingURL=main.3de88c23.chunk.js.map